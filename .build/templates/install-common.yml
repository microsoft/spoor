steps:
- script: git config --system core.longpaths true
  displayName: Allow long file paths (Windows)
  condition: eq(variables['Agent.OS'], 'Windows_NT')
- script: |
    wget https://apt.llvm.org/llvm.sh
    chmod +x llvm.sh
    sudo ./llvm.sh 10
    sudo apt-get update
    sudo apt-get install clang-format-10 clang-tidy-10
  displayName: Install LLVM (Linux)
  condition: eq(variables['Agent.OS'], 'Linux')
# LLVM 10 is already installed on the Azure Pipelines macOS image via Homebrew
# and on the Windows image via Visual Studio.
- script: cp ./.build/ci.bazelrc ./.bazelrc
  displayName: Copy .bazelrc