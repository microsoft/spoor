# Copyright (c) Microsoft Corporation.
# Licensed under the MIT License.

steps:
- script: |
    wget https://apt.llvm.org/llvm.sh
    chmod +x llvm.sh
    sudo ./llvm.sh 12
  displayName: Install LLVM (Linux)
  condition: eq(variables['Agent.OS'], 'Linux')
- script: echo '##vso[task.prependpath]/usr/local/opt/llvm/bin'
  displayName: Install LLVM (macOS)
  condition: eq(variables['Agent.OS'], 'Darwin')
- script: sudo xcode-select --switch /Applications/Xcode_12.5.app/Contents/Developer
  displayName: Set Xcode version
  condition: eq(variables['Agent.OS'], 'Darwin')
- script: pip3 install pylint yapf
  displayName: Install Pylint and YAPF
- script: cat .build/macos-ci.bazelrc .build/ci.bazelrc > .bazelrc
  displayName: Create .bazelrc (macOS)
  condition: eq(variables['Agent.OS'], 'Darwin')
